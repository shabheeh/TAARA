
<%- include('../Layouts/User/header') -%>

    <!-- Plugins CSS File -->
    <link rel="stylesheet" href="/User/assets/css/bootstrap.min.css">
    <!-- Main CSS File -->
    <link rel="stylesheet" href="/User/assets/css/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3.10.0/notyf.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

    <style>
        .address-container {
    width: 100%;
    margin-bottom: 20px;
}

.add-address {
    text-align: left;
    margin-bottom: 10px;
    background-color: #c96;
}

.add-address:hover {
    background-color: #c96;
}

.add-address button {
    padding: 8px 16px;
}

.address-card {
    background-color: #ffffff;
    border: 1px solid #e0e0e0;
    border-radius: 5px;
    padding: 15px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.address-details {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.address-header {
    display: flex;
    align-items: center;
}

.address-title {
    margin: 0;
    font-size: 18px;
    font-weight: bold;
}

.options-dropdown {
    position: relative;
}

.options-icon {
    background: none;
    border: none;
    cursor: pointer;
    padding: 0;
}

.options-icon-img {
    width: 24px;
    height: 24px;
    cursor: pointer;
}

.options-menu {
    position: absolute;
    top: 30px;
    left: 0;
    background-color: #ffffff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    display: none;
}

.options-dropdown:hover .options-menu {
    display: block;
}

.option-item {
    padding: 8px 16px;
    cursor: pointer;
}

.option-label {
    color: #333333;
    font-size: 14px;
}

.address-content {
    margin-top: 10px;
    font-size: 14px;
    line-height: 1.6;
}

.address-name {
    font-weight: bold;
}

.address-phone {
    margin-right: 10px;
}

.address-line {
    display: block;
}

.address-zip {
    font-weight: bold;
}

.error-message {
    color: #ff0000 !important;
}

.modal-wide .modal-dialog {
            max-width: 70%; /* Adjust the width as needed */
        }


        .order-container {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-bottom: 20px;
}

.order-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    cursor: pointer;
}

.order-content {
    padding: 15px;
    border-top: 1px solid #eee;
}

.product-item {
    display: flex;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.product-image {
    width: 134px;
    height: auto;
    margin-right: 1rem;
}

.product-details {
    flex-grow: 1;
}

.product-price-1 {
    margin-bottom: 0.5rem;
}

.product-total {
    font-size: 14px;
    color: #666;
    margin-bottom: 2px;
}

.product-actions {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    margin-top: 1rem;
}

.product-actions .btn {
    margin-bottom: 0.5rem;
}
.password-input-wrapper {
    position: relative;
}

.password-input-wrapper .form-control {
    padding-right: 35px; /* Make room for the icon */
}

.password-input-wrapper .fas {
    position: absolute;
    top: 50%;
    right: 10px;
    transform: translateY(-50%);
    cursor: pointer;
    color: #999; /* Adjust color as needed */
}

.wallet-balance-card {
  background-color: #f7f7f7;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 20px;
  box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.balance-amount {
  font-size: 36px;
  font-weight: bold;
  color: #333;
}

.transaction-list {
  overflow-y: auto;
  max-height: 300px; /* adjust the max height as needed */
}

.transaction-list-inner {
  padding: 10px;
}

.transaction-item {
  padding: 10px;
  border-bottom: 1px solid #ccc;
}

.transaction-item:last-child {
  border-bottom: none;
}

.transaction-item .font-weight-bold {
  color: #666;
}

.transaction-item small {
  color: #999;
}

.text-success {
  color: #2ecc71;
}

/* add scroll feature only when transaction list exceeds 5 items */
.transaction-list-inner:not(:nth-child(-n+5)) {
  overflow-y: auto;
  max-height: 200px; /* adjust the max height as needed */
}

    </style>



    
</head>

<body>
    <div class="page-wrapper">
        
        <%- include('../Layouts/User/navbar') -%>

        <main class="main">
        	<div class="page-header text-center" style="background-color: black;">
        		<div class="container">
        			<h1 class="page-title">MY ACCOUNT</h1>
        		</div><!-- End .container -->
        	</div><!-- End .page-header -->
            <nav aria-label="breadcrumb" class="breadcrumb-nav mb-3">
                <div class="container">
                    <ol class="breadcrumb">
                        <li class="breadcrumb-item"><a href="/">Home</a></li>
                        <li class="breadcrumb-item active" aria-current="page">My Account</li>
                    </ol>
                </div><!-- End .container -->
            </nav><!-- End .breadcrumb-nav -->

            <div class="page-content">
            	<div class="dashboard">
	                <div class="container">
	                	<div class="row">
	                		<aside class="col-md-4 col-lg-3">
	                			<ul class="nav nav-dashboard flex-column mb-3 mb-md-0" role="tablist">
								    <li class="nav-item">
								        <a class="nav-link active" id="tab-dashboard-link" data-toggle="tab" href="#tab-dashboard" role="tab" aria-controls="tab-dashboard" aria-selected="true">Account Information</a>
								    </li>
                                    <li class="nav-item">
								        <a class="nav-link" id="tab-security-link" data-toggle="tab" href="#tab-security" role="tab" aria-controls="tab-security" aria-selected="false">Sign-in & Security</a>
								    </li>
                                    <li class="nav-item">
								        <a class="nav-link" id="tab-address-link" data-toggle="tab" href="#tab-address" role="tab" aria-controls="tab-address" aria-selected="false">Addresses</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-orders-link" data-toggle="tab" href="#tab-orders" role="tab" aria-controls="tab-orders" aria-selected="false">Orders</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-wallet-link" data-toggle="tab" href="#tab-wallet" role="tab" aria-controls="tab-wallet" aria-selected="false">Wallet</a>
								    </li>
								    <li class="nav-item">
								        <a class="nav-link" id="tab-account-link" data-toggle="tab" href="#tab-account" role="tab" aria-controls="tab-account" aria-selected="false">Account Details</a>
								    </li>
								    <li class="nav-item">
                                        <a class="nav-link" data-toggle="modal"  data-bs-toggle="modal" href="#signOutModal" data-bs-target="#signOutModal">Sign Out</a>
                                        
                                      </li>
                                      
								</ul>
	                		</aside><!-- End .col-lg-3 -->

                            <!-- Sign Out Confirmation Modal -->
                            <div class="modal fade" id="signOutModal" tabindex="-1" role="dialog" aria-labelledby="signOutModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog " role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="editAddressModalLabel">Confirm Sign Out</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body m-5">
                                            <!-- Form Content -->
                                            <form action="/signout" method="POST" >
                                                
                                                
                                                <button type="submit" class="btn btn-primary">
                                                    CONFIRM
                                                </button>
                                                <button type="button" class="btn btn-outline-primary" data-dismiss="modal">DISCARD</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>

	                		<div class="col-md-8 col-lg-9">
	                			<div class="tab-content">

								    <div class="tab-pane fade show active" id="tab-dashboard" role="tabpanel" aria-labelledby="tab-dashboard-link">
                                        <div class="row">
                                            <div class="col">
                                                <h4 class="profile-title text-center">Profile Information</h4><!-- End .profile-title -->
                                                <div class="card card-dashboard">
                                                    <div class="card-body col-md-8 col-lg-9">
                                                        <form id="profile-form">
                                                            <div class="form-row">
                                                                <div class="form-group col-md-6">
                                                                    <label for="first-name" id="firstNameLabel">First Name:</label>
                                                                    <input type="text" id="first-name" class="form-control" value="<%= user.firstName %>" placeholder="Enter your first name" disabled>
                                                                </div>
                                                                <div class="form-group col-md-6">
                                                                    <label for="last-name" id="lastNameLabel">Last Name:</label>
                                                                    <input type="text" id="last-name" class="form-control" value="<%= user.lastName %>" placeholder="Enter your last name" disabled>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="email" id="emailLabel">Email:</label>
                                                                <input class="form-control" value="<%= user.email %>" disabled readonly>
                                                              </div>
                                                            <div class="form-group">
                                                                <label for="phone" id="phoneLabel">Phone:</label>
                                                                <input type="text" id="phone" class="form-control" value="<%= user.phone %>" placeholder="Enter your phone number" disabled>
                                                            </div>
                                                            <button type="button" class="btn btn-primary" id="edit-button">Edit</button>
                                                            <button type="button" class="btn btn-primary" id="save-button" style="display: none;">Save</button>
                                                            <button type="button" class="btn btn-secondary" id="cancel-button" style="display: none;">Cancel</button>
                                                        </form>
                                                    </div><!-- End .card-body -->
                                                </div><!-- End .card-dashboard -->
                                            </div><!-- End .col -->
                                        </div><!-- End .row -->
                                        

								    </div><!-- .End .tab-pane -->

                                    <div class="tab-pane fade" id="tab-security" role="tabpanel" aria-labelledby="tab-security-link">
                                        <div class="row">
                                            <div class="col">
                                                <h4 class="profile-title text-center">Sign-in & Security</h4>
                                                <div class="card card-dashboard">
                                                    <div class="card-body col-md-8 col-lg-9">
                                                        <form id="password-form">
                                                            <h5>Change Password</h5>
                                                            <div class="form-group">
                                                                <label for="current-pass" id="currentPassLabel">Enter current password</label>
                                                                <div class="password-input-wrapper">
                                                                    <input type="password" id="current-pass" class="form-control" placeholder="Enter current password">
                                                                    <i class="fas fa-eye togglePassword" id="toggleCurrentPass"></i>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="newPass" id="newPassLabel">Enter new password</label>
                                                                <div class="password-input-wrapper">
                                                                    <input type="password" id="newPass" class="form-control" placeholder="Enter new password">
                                                                    <i class="fas fa-eye togglePassword" id="toggleNewPass"></i>
                                                                </div>
                                                            </div>
                                                            <div class="form-group">
                                                                <label for="newPass2" id="newPassLabel2">Confirm new password</label>
                                                                <div class="password-input-wrapper">
                                                                    <input type="password" id="newPass2" class="form-control" placeholder="Re-Enter new password">
                                                                    <i class="fas fa-eye togglePassword" id="toggleNewPass2"></i>
                                                                </div>
                                                            </div>
                                                            <button type="submit" class="btn btn-primary" id="confirm-button">Confirm</button>
                                                        </form>
                                                    </div><!-- End .card-body -->
                                                </div><!-- End .card-dashboard -->
                                            </div><!-- End .col -->
                                        </div><!-- End .row -->
                                    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-orders" role="tabpanel" aria-labelledby="tab-orders-link">
                                        <div class="orders-container">
                                            <div class="orders-header d-flex justify-content-between align-items-center mb-3">
                                                <h4 class="profile-title">Your Orders <span class="order-count"><%= orders ? orders.length : "" %></span></h4>
                                                <!-- <select class="form-control" style="width: auto;">
                                                    <option>Past 3 Month</option>
                                                    <option>Past 6 Month</option>
                                                    <option>Past Year</option>
                                                </select> -->
                                            </div>
                                    
                                            <ul class="nav nav-pills mb-3" id="orders-tab" role="tablist">
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link active" id="orders-all-tab" data-toggle="pill" href="#orders-all" role="tab" aria-controls="orders-all" aria-selected="true">Orders</a>
                                                </li>
                                                
                                                <li class="nav-item" role="presentation">
                                                    <a class="nav-link" id="orders-cancelled-tab" data-toggle="pill" href="#orders-cancelled" role="tab" aria-controls="orders-cancelled" aria-selected="false">Cancelled Orders</a>
                                                </li>
                                            </ul>
                                    
                                            <div class="tab-content " id="orders-tabContent">
                                                <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
                                                    <% if (orders && orders.length > 0) { %>
                                                        <% orders.forEach((order, index) => { %>
                                                            <% if (order.paymentStatus === "Failed") { %>
                                                                
                                                                <div class="order-item mb-2 order-container">
                                                                    <div class="order-header d-flex justify-content-between align-items-center mb-2">
                                                                        <div>
                                                                            <div>Order placed</div>
                                                                            <div><strong><%= new Date(order.createdAt).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>Total</div>
                                                                            <div><strong>Rs.<%= order.totalPrice %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>Ship to</div>
                                                                            <div><strong><%= order.address.name %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>
                                                                                <strong class="text-danger">Payment Faild</strong>
                                                                            </div>
                                                                            <div>
                                                                                <a href="#" class="mr-2" data-toggle="collapse" data-target="#order-details-<%= index %>" >View order details</a>
                                                                                
                                                                            </div>
                                                                        </div>
                                                                        <div>
                                                                            <a href="#" id="retry-payment" data-order-id="<%= order._id %>"class="btn btn-primary">Retry</a>
                                                                        </div>
                                                                    </div>
                                                                    <div class="order-content collapse" id="order-details-<%= index %>">
                                                                        <% order.products.forEach(current => { %>
                                                                            <div class="product-item d-flex align-items-start mb-2">
                                                                                <img src="/Admin/assets/Products-Images/<%= current.variant.images[0] %>" alt="<%= current.product.name %>" class="product-image mr-3" >
                                                                                <div class="product-details mb-0">
                                                                                    <div class="d-flex justify-content-between">
                                                                                        <h5 class="product-heading mb-0">
                                                                                            <a style="color: black;" href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>"><%= current.product.name %></a>
                                                                                        </h5>
                                                                                        <div class="align-items-end"><strong class="text-info" id="orderStatus<%= order._id %>-<%= current.variant._id %>"><%= current.status %></strong></div>
                                                                                    </div>
                                                                                    
                                                                                    <p class="product-price-1 mb-0">Price: Rs.<%= current.discountedPrice %></p>
                                                                                    <p class="product-total mb-0">Total Quantity: <%= current.quantity %></p>
                                                                                    <p class="product-total mb-0">Total: Rs.<%= current.totalPrice %></p>
                                                                                    
                                                                                    
                                                                                    <div class=" mt-1">
                                                                                        
                                                                                        <a href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>" class="btn btn-sm btn-outline-secondary mr-2">View item</a>
                                                                                        
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                            </div>
    
                                                                            
    
                                                                            
    
    
                                                                        <% }); %>
                                                                        <div class="address-card my-2" >
                                                                            <div class="address-details">
                                                                                <p class="address-content">
                                                                                    <strong>Shipping Address: </strong><br>
                                                                                    <span class="address-name"><%= order.address.name %></span>
                                                                                    <span class="address-phone"><%= order.address.phone %></span><br>
                                                                                    <span class="address-line"><%= order.address.address %>, <%= order.address.street %>, <%= order.address.city %>, <%= order.address.landmark %>, <%= order.address.state %> - <span class="address-zip"><%= order.address.pincode %></span></span>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                 
                                                             <% } else { %>
                                                                <div class="order-item mb-2 order-container">
                                                                    <div class="order-header d-flex justify-content-between align-items-center mb-2">
                                                                        <div>
                                                                            <div>Order placed</div>
                                                                            <div><strong><%= new Date(order.createdAt).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>Total</div>
                                                                            <div><strong>Rs.<%= order.finalTotal %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>Ship to</div>
                                                                            <div><strong><%= order.address.name %></strong></div>
                                                                        </div>
                                                                        <div>
                                                                            <div>Order # <%= order.orderId %></div>
                                                                            <div>
                                                                                <a href="#" class="mr-2" data-toggle="collapse" data-target="#order-details-<%= index %>" >View order details</a>
                                                                                <a href="/invoice/<%= order._id %>">View invoice</a>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div class="order-content collapse" id="order-details-<%= index %>">
                                                                        <% order.products.forEach(current => { %>
                                                                            <div class="product-item d-flex align-items-start mb-2">
                                                                                <img src="/Admin/assets/Products-Images/<%= current.variant.images[0] %>" alt="<%= current.product.name %>" class="product-image mr-3" >
                                                                                <div class="product-details mb-0">
                                                                                    <div class="d-flex justify-content-between">
                                                                                        <h5 class="product-heading mb-0">
                                                                                            <a style="color: black;" href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>"><%= current.product.name %></a>
                                                                                        </h5>
                                                                                        <div class="align-items-end"><strong class="
                                                                                            <% if (current.status === 'Pending') { %>text-info
                                                                                                <% } else if (current.status === 'Dispatched') { %>text-warning
                                                                                                <% } else if (current.status === 'Out for Delivery' || current.status === 'Delivered') { %>text-success
                                                                                                <% } else if (current.status === 'Cancelled') { %>text-danger
                                                                                                <% } else if (current.status === 'Return Requested') { %>text-info
                                                                                                <% } else if (current.status === 'Return Rejected') { %>text-danger
                                                                                                <% } else if (current.status === 'Returned') { %>text-danger
                                                                                                <% } %>"
                                                                                             id="orderStatus<%= order._id %>-<%= current.variant._id %>"><%= current.status %></strong></div>
                                                                                    </div>
                                                                                    
                                                                                    <p class="product-price-1 mb-0">Price: Rs.<%= current.discountedPrice %></p>
                                                                                    <p class="product-total mb-0">Total Quantity: <%= current.quantity %></p>
                                                                                    <p class="product-total mb-0">Total: Rs.<%= current.discountedPrice * current.quantity %></p>
                                                                                    <% if (current.status === 'Cancelled') { %>
                                                                                        <p class="mb-0">Cancelled Date: <%= new Date(current.cancelDate).toLocaleDateString('en-US', { month: 'long', day : 'numeric', year: 'numeric' }) %></p>
                                                                                        
                                                                                            <% } else { %>
                                                                                             
                                                                                                <p class="mb-0">
                                                                                                    Return or replace items: Eligible through 
                                                                                                    <%= new Date(order.createdAt.getTime() + 3 * 24 * 60 * 60 * 1000).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %>
                                                                                                  </p>
                                                                                                  
                                                                                    <% } %>
                                                                                    
                                                                                    <div class=" mt-1">
                                                                                        <a href="#" id="addToCart-<%= current.variant._id %>" class="btn btn-sm btn-outline-primary-2 mr-2">Buy again</a>
                                                                                        <a href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>" class="btn btn-sm btn-outline-secondary mr-2">View item</a>
                                                                                        <% if (current.status === 'Delivered') { %>
                                                                                            <a id="returnBtn<%= order._id %>-<%= current.variant._id %>" data-toggle="modal" href="#returnOrderModal<%= order._id %>-<%= current.variant._id %>" class="btn btn-sm btn-outline-danger mr-2" data-bs-toggle="modal" data-bs-target="#returnOrderModal<%= current.variant._id %>">Return</a>
                                                                                            <% } else if (current.status === 'Cancelled' || current.status === 'Return Requested' || current.status === 'Returned' || current.status === 'Return Rejected') { %>
                                                                                                <% } else { %>
                                                                                                 
                                                                                                <a id="cancelBtn<%= order._id %>-<%= current.variant._id %>" data-toggle="modal" href="#cancelOrderModal<%= order._id %>-<%= current.variant._id %>" class="btn btn-sm btn-outline-danger mr-2" data-bs-toggle="modal" data-bs-target="#cancelOrderModal<%= current.variant._id %>">Cancel</a>
                                                                                        <% } %>
                                                                                        
                                                                                    </div>
                                                                                </div>
                                                                            </div>
    
                                                                            <!-- Cancel Modal -->
                                                                            <div class="modal fade" id="cancelOrderModal<%= order._id %>-<%= current.variant._id %>" tabindex="-1" role="dialog"
                                                                                aria-labelledby="cancelOrderModalLabel" >
                                                                                <div class="modal-dialog " role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" id="editAddressModalLabel">Cancel Order</h5>
                                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                                <span aria-hidden="true">&times;</span>
                                                                                            </button>
                                                                                        </div>
                                                                                        <div class="modal-body m-5">
                                                                                            <!-- Form Content -->
                                                                                            <form id="cancel-order-<%= order._id %>-<%= current.product._id %>-<%= current.variant._id %>">
                                                                                                <label id="cancelOrderLabel-<%= order._id %>-<%= current.variant._id %>">Reason for Cancel</label>
                                                                                                <textarea name="resonForCancel" id="cancelOrder-<%= order._id %>-<%= current.variant._id %>" class="form-control"></textarea>
                                                                                                
                                                                                                <button type="submit" class="btn btn-primary">
                                                                                                    CONFIRM
                                                                                                </button>
                                                                                                <button type="button" class="btn btn-outline-primary" data-dismiss="modal">DISCARD</button>
                                                                                            </form>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
    
                                                                            <!-- Return  Modal -->
                                                                            <div class="modal fade" id="returnOrderModal<%= order._id %>-<%= current.variant._id %>" tabindex="-1" role="dialog"
                                                                                aria-labelledby="returnOrderModalLabel">
                                                                                <div class="modal-dialog " role="document">
                                                                                    <div class="modal-content">
                                                                                        <div class="modal-header">
                                                                                            <h5 class="modal-title" id="returnOrderModalLabel">Request for return</h5>
                                                                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                                                <span aria-hidden="true">&times;</span>
                                                                                            </button>
                                                                                        </div>
                                                                                        <div class="modal-body m-5">
                                                                                            <!-- Form Content -->
                                                                                            <form id="return-order-<%= order._id %>-<%= current.product._id %>-<%= current.variant._id %>">
                                                                                                <label id="returnOrderLabel-<%= order._id %>-<%= current.variant._id %>">Reason for Returning</label>
                                                                                                <textarea name="resonForReturn" id="returnOrder-<%= order._id %>-<%= current.variant._id %>" class="form-control"></textarea>
                                                                                                
                                                                                                <button type="submit" class="btn btn-primary">
                                                                                                    REQUEST
                                                                                                </button>
                                                                                                <button type="button" class="btn btn-outline-primary" data-dismiss="modal">DISCARD</button>
                                                                                            </form>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
    
    
                                                                        <% }); %>
                                                                        <div class="address-card my-2" >
                                                                            <div>
                                                                                <p><strong>Payment Method: </strong><%= order.payment %></p>
                                                                            </div>
                                                                            <div class="address-details">
                                                                                <p class="address-content">
                                                                                    <strong>Shipping Address: </strong><br>
                                                                                    <span class="address-name"><%= order.address.name %></span>
                                                                                    <span class="address-phone"><%= order.address.phone %></span><br>
                                                                                    <span class="address-line"><%= order.address.address %>, <%= order.address.street %>, <%= order.address.city %>, <%= order.address.landmark %>, <%= order.address.state %> - <span class="address-zip"><%= order.address.pincode %></span></span>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            <% } %>
                                                            
                                                        <% }); %>
                                                        
                                                    <% } else { %>
                                                        <p>No orders found.</p>
                                                    <% } %>
                                                </div>
                                                



                                                
                                                <div class="tab-pane fade" id="orders-cancelled" role="tabpanel" aria-labelledby="orders-cancelled-tab">
                                                    <% if (cancelledOrders && cancelledOrders.length > 0) { %>
                                                        <% cancelledOrders.forEach((order, index) => { %>
                                                            <div class="order-item mb-2 order-container">
                                                                <div class="order-header d-flex justify-content-between align-items-center mb-2">
                                                                    <div>
                                                                        <div>Order placed</div>
                                                                        <div><strong><%= new Date(order.createdAt).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %></strong></div>
                                                                    </div>

                                                                    <div>
                                                                        <div>Ship to</div>
                                                                        <div><strong><%= order.address.name %></strong></div>
                                                                    </div>
                                                                    <div>
                                                                        <div>Order # <%= order.orderId %></div>
                                                                        <div>
                                                                            <a href="#" class="mr-2" data-toggle="collapse" data-target="#order-details-<%= index %>">View order details</a>
                                                                            <a href="/invoice/<%= order._id %>">View invoice</a>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                                <div class="order-content collapse" id="order-details-<%= index %>">
                                                                    <% order.products.forEach(current => { %>
                                                                        <div class="product-item d-flex align-items-start mb-2">
                                                                            <img src="/Admin/assets/Products-Images/<%= current.variant.images[0] %>" alt="<%= current.product.name %>" class="product-image mr-3" style="width: 129px; height: auto;">
                                                                            <div class="product-details mb-0">
                                                                                <div class="d-flex justify-content-between">
                                                                                    <h5 class="product-heading mb-0">
                                                                                        <a style="color: black;" href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>"><%= current.product.name %></a>
                                                                                    </h5>
                                                                                    
                                                                                </div>
                                                                                <p class="product-price-1 mb-0">Rs.<%= current.discountedPrice %></p>
                                                                                <p class="product-total mb-0">Total Quantity: <%= current.quantity %></p>
                                                                                <p class="product-total mb-0">Total: Rs.<%= current.totalPrice %></p>
                                                                                <p class="mb-0">Cancelled Date: <%= new Date(current.cancelDate).toLocaleDateString('en-US', { month: 'long', day : 'numeric', year: 'numeric' }) %></p>
                                                                                <div class=" mt-1">
                                                                                    <a href="#" id="addToCart-<%= current.variant._id %>" class="btn btn-sm btn-outline-primary-2 mr-2">Buy again</a>
                                                                                    <a href="/product/<%= current.product._id %>/variant/<%= current.variant._id %>" class="btn btn-sm btn-outline-secondary mr-2">View item</a>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    <% }); %>
                                                                </div>
                                                            </div>
                                                        <% }); %>
                                                    <% } else { %>
                                                        <div>No cancelled orders found.</div>
                                                    <% } %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    


								    <div class="tab-pane fade" id="tab-wallet" role="tabpanel" aria-labelledby="tab-wallet-link">
                                        <% if (wallet) { %>
                                            <div class="container">
                                                <div class="row">
                                                    <div class="col-md-8">
                                                        <div class="address-card wallet-balance-card">
                                                            <div class="card-body">
                                                              <div class="d-flex justify-content-center align-items-center mb-4">
                                                                <div>
                                                                  <h5 class="card-title mb-1 text-uppercase">Wallet Balance</h5>
                                                                  <h2 class="text-center mb-0 balance-amount">₹ <%= wallet.balance %></h2>
                                                                </div>
                                                              </div>
                                                          
                                                              <h5 class="card-title mt-4 mb-3">Transaction History</h5>
                                                              <div class="transaction-list">
                                                                <% if (wallet.transactions && wallet.transactions.length > 0) { %>
                                                                  <div class="transaction-list-inner">
                                                                    <% wallet.transactions.forEach(transaction => { %>
                                                                      <div class="transaction-item d-flex justify-content-between align-items-center mb-2">
                                                                        <div>
                                                                          <p class="mb-0 font-weight-bold"><%= transaction.type %></p>
                                                                          <small class="text-muted"><%= new Date(transaction.date).toLocaleDateString('en-US', { month: 'long', day : 'numeric', year: 'numeric' }) %></small><br>
                                                                          <small class="text-muted py-0"><%= transaction.orderId %></small><br>
                                                                          <small class="text-muted mb-0"><%= transaction.product %></small>

                                                                        </div>
                                                                        <% if (transaction.entry === 'Credit') { %>
                                                                            <span class="text-success">+ ₹<%= transaction.amount %></span>
                                                                            <% } else { %>
                                                                                <span class="text-danger">- ₹<%= transaction.amount %></span>
                                                                        <% } %>
                                                                        
                                                                      </div>
                                                                    <% }) %>
                                                                  </div>
                                                                <% } %>
                                                              </div>
                                                          
                                                              <!-- <div class="text-center mt-4">
                                                                <a href="#" class="btn btn-outline-primary">View All Transactions</a>
                                                              </div> -->
                                                            </div>
                                                          </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <% } else { %>
                                             <p>You dont have an active wallet</p>
                                        <% } %>
                                        
                                    </div><!-- .End .tab-pane -->

								    <div class="tab-pane fade" id="tab-address" role="tabpanel" aria-labelledby="tab-address-link">
                                        <!-- <p>The following addresses will be used on the checkout page by default.</p> -->
                                     <h4 class="profile-title text-center">Addresses</h4><!-- End .profile-title -->
                                        <div class="address-container" id="address-container">
                                            <div class="add-address">
                                                <a id="tab-addAddress-link" data-toggle="modal" href="#addAddressModal" style="color: black;" role="button" aria-controls="addAddressModal" aria-selected="false" class="nav-link btn btn-primary">
                                                    <span class="material-symbols-outlined">add</span>Add Address
                                                </a> 
                                            </div>
                                            <% if (addresses) { %>
                                                <% addresses.forEach(address => { %>
                                                    <div class="address-card my-2" data-address-id="<%= address._id %>">
                                                        <div class="address-details">
                                                            <p class="address-content">
                                                                <span class="address-name"><%= address.name %></span>
                                                                <span class="address-phone"><%= address.phone %></span><br>
                                                                <span class="address-line"><%= address.address %>, <%= address.street %>, <%= address.city %>, <%= address.landmark %>, <%= address.state %> - <span class="address-zip"><%= address.pincode %></span></span>
                                                            </p>
                                                            <div class="options-dropdown">
                                                                <button class="options-icon">
                                                                    <span class="material-symbols-outlined">
                                                                        more_vert
                                                                    </span>
                                                                </button>
                                                                <div class="options-menu">
                                                                    <div class="option-item">
                                                                        <a data-toggle="modal" href="#editAddressModal<%= address._id %>" class="option-label" data-bs-toggle="modal" data-bs-target="#editAddressModal<%= address._id %>">Edit</a>
                                                                    </div>
                                                                    <div class="option-item">
                                                                        <a data-toggle="modal" href="#deleteAddressModal<%= address._id %>" class="option-label" data-bs-toggle="modal" data-bs-target="#deleteAddressModal<%= address._id %>">Delete</a>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                <% }); %>


                                                <% addresses.forEach(address => { %>
                                                    <!-- Edit Address Modal -->
                                                    <div class="modal-wide modal fade" id="editAddressModal<%= address._id %>" tabindex="-1" role="dialog"
                                                        aria-labelledby="editAddressModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog modal-lg" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="editAddressModalLabel">Edit Address</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body m-5">
                                                                    <!-- Form Content -->
                                                                    <form id="edit-address-<%= address._id %>">
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <label id="editNameLabel-<%= address._id %>">Name *</label>
                                                                                <input id="editName-<%= address._id %>" type="text" class="form-control" value="<%= address.name %>">
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <label id="editPhoneLabel-<%= address._id %>">Phone*</label>
                                                                                <input id="editPhone-<%= address._id %>" type="text" class="form-control" value="<%= address.phone %>">
                                                                            </div>
                                                                        </div>
                                                                        <label id="editAddressLabel-<%= address._id %>">Address</label>
                                                                        <input id="editAddress-<%= address._id %>" type="text" class="form-control" value="<%= address.address %>">
                                                                        <small class="form-text">Your house or office name and address</small>
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <label id="editStreetLabel-<%= address._id %>">Street/Locality</label>
                                                                                <input id="editStreet-<%= address._id %>" type="text" class="form-control" value="<%= address.street %>">
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <label id="editCityLabel-<%= address._id %>">City/Destrict/Town</label>
                                                                                <input id="editCity-<%= address._id %>" type="text" class="form-control" value="<%= address.city %>">
                                                                            </div>
                                                                        </div>
                                                                        <label id="editLandmarkLabel-<%= address._id %>">Landmark</label>
                                                                        <input id="editLandmark-<%= address._id %>" type="text" class="form-control" value="<%= address.landmark %>">
                                                                        <div class="row">
                                                                            <div class="col-sm-6">
                                                                                <label id="editStateLabel-<%= address._id %>">State</label>
                                                                                <input id="editState-<%= address._id %>" type="text" class="form-control" value="<%= address.state %>">
                                                                            </div>
                                                                            <div class="col-sm-6">
                                                                                <label id="editPincodeLabel-<%= address._id %>">Pincode</label>
                                                                                <input id="editPincode-<%= address._id %>" type="number" class="form-control" value="<%= address.pincode %>">
                                                                            </div>
                                                                        </div>
                                                                        <button type="submit" class="btn btn-outline-primary-2">
                                                                            <span>UPDATE</span>
                                                                            <i class="icon-long-arrow-right"></i>
                                                                        </button>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <!-- Delete Confirmation Modal -->
                                        
                                                    <div class="modal fade" id="deleteAddressModal<%= address._id %>" tabindex="-1" role="dialog" aria-labelledby="deleteAddressModalLabel" aria-hidden="true">
                                                        <div class="modal-dialog" role="document">
                                                            <div class="modal-content">
                                                                <div class="modal-header">
                                                                    <h5 class="modal-title" id="deleteAddressModalLabel">Delete Address</h5>
                                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                                        <span aria-hidden="true">&times;</span>
                                                                    </button>
                                                                </div>
                                                                <div class="modal-body m-5">
                                                                    <p>Are you sure you want to delete this address?</p>
                                                                    
                                                                </div>
                                                                <div class="modal-footer">
                                                                    <form id="delete-address-form-<%= address._id %>">
                                                                        <input type="hidden" name="addressId" value="<%= address._id %>">
                                                                        <button type="submit" class="btn btn-danger">Delete</button>
                                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                    </div>
                                                <% }); %>


                                            <% } %>
                                        </div>
                                    </div>


                                                    
                                        

                                        <!-- .End .tab-pane -->
                                    

                                    <!-- Add Address Modal -->
                                    <div class="modal-wide modal fade" id="addAddressModal" tabindex="-1" role="dialog" aria-labelledby="addAddressModalLabel" aria-hidden="true">
                                        <div class="modal-dialog" role="document"> 
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="addAddressModalLabel">Add Address</h5>
                                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                        <span aria-hidden="true">&times;</span>
                                                    </button>
                                                </div>
                                                <div class="modal-body m-5">
                                                    <!-- Form Content -->
                                                    <form id="add-address">
                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label id="addNameLabel">Name *</label>
                                                                <input id="addName" type="text" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label id="addPhoneLabel">Phone*</label>
                                                                <input id="addPhone" type="text" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                        <label id="addAddressLabel">Address</label>
                                                        <input id="addAddress" type="text" class="form-control" required>
                                                        <small class="form-text">Your house or office name and address</small>

                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label id="addStreetLabel">Street/Locality</label>
                                                                <input id="addStreet" type="text" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label id="addCityLabel">City/Destrict/Town</label>
                                                                <input id="addCity" type="text" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                        <label id="addLandmarkLabel">Landmark</label>
                                                        <input id="addLandmark" type="text" class="form-control">

                                                        <div class="row">
                                                            <div class="col-sm-6">
                                                                <label id="addStateLabel">State</label>
                                                                <input id="addState" type="text" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->

                                                            <div class="col-sm-6">
                                                                <label id="addPincodeLabel">Pincode</label>
                                                                <input id="addPincode" type="number" class="form-control" required>
                                                            </div><!-- End .col-sm-6 -->
                                                        </div><!-- End .row -->

                                                        <button type="submit" class="btn btn-outline-primary-2">
                                                            <span>SAVE</span>
                                                            <i class="icon-long-arrow-right"></i>
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>


								</div>
	                		</div><!-- End .col-lg-9 -->
	                	</div><!-- End .row -->
	                </div><!-- End .container -->
                </div><!-- End .dashboard -->
            </div><!-- End .page-content -->
        </main><!-- End .main -->

        <%- include('../Layouts/User/footer') -%>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script> 
    <script src="https://cdn.jsdelivr.net/npm/notyf@3.10.0/notyf.min.js"></script>

    <script>
        document.getElementById('edit-button').addEventListener('click', function() {
            const inputs = document.querySelectorAll('#profile-form input');
            inputs.forEach(input => input.disabled = false);
        
            document.getElementById('edit-button').style.display = 'none';
            document.getElementById('save-button').style.display = 'inline-block';
            document.getElementById('cancel-button').style.display = 'inline-block';
        });
        
        document.getElementById('cancel-button').addEventListener('click', function() {

            const inputs = document.querySelectorAll('#profile-form input');
            inputs.forEach(input => input.disabled = true);

            document.getElementById('edit-button').style.display = 'inline-block';
            document.getElementById('save-button').style.display = 'none';
            document.getElementById('cancel-button').style.display = 'none';

            const labels = document.querySelectorAll('#profile-form label');
            labels.forEach(label => label.classList.remove('error-message'));

            document.getElementById('firstNameLabel').innerHTML = "First Name:";
            document.getElementById('lastNameLabel').innerHTML = "Last Name:";
            document.getElementById('emailLabel').innerHTML = "Email:";
            document.getElementById('phoneLabel').innerHTML = "Phone:";
        });

        
        document.getElementById('save-button').addEventListener('click', async function(event) {
            event.preventDefault();
        
            let isValid = true;
        
            const firstName = document.getElementById('first-name').value.trim();
            const lastName = document.getElementById('last-name').value.trim();
            
            const phone = document.getElementById('phone').value.trim();
        
            console.log(firstName, lastName, email, phone);
        
            const firstNameLabel = document.getElementById('firstNameLabel');
            const lastNameLabel = document.getElementById('lastNameLabel');
            
            const phoneLabel = document.getElementById('phoneLabel');
        
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const phonePattern = /^\d{10}$/;
        
            if (!firstName) {
                firstNameLabel.innerHTML = "First Name is required";
                firstNameLabel.classList.add('error-message');
                isValid = false;
            } else {
                firstNameLabel.innerHTML = "First Name:";
                firstNameLabel.classList.remove('error-message');
            }
        
            if (!lastName) {
                lastNameLabel.innerHTML = "Last Name is required";
                lastNameLabel.classList.add('error-message');
                isValid = false;
            } else {
                lastNameLabel.innerHTML = "Last Name:";
                lastNameLabel.classList.remove('error-message');
            }
        
            if (!phone) {
                phoneLabel.innerHTML = "Phone is required";
                phoneLabel.classList.add('error-message');
                isValid = false;
            } else if (!phonePattern.test(phone)) {
                phoneLabel.innerHTML = "Phone is not valid";
                phoneLabel.classList.add('error-message');
                isValid = false;
            } else {
                phoneLabel.innerHTML = "Phone:";
                phoneLabel.classList.remove('error-message');
            }
        
            if (isValid) {
                const data = {
                    firstName,
                    lastName,
                    phone
                };
        
                updateProfile(data);
            }
        });
        
        async function updateProfile(data) {
            try {
                const response = await fetch('/profile', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
        
                const result = await response.json();
        
                if (result.success) {
                    const inputs = document.querySelectorAll('#profile-form input');
                    inputs.forEach(input => input.disabled = true);
        
                    document.getElementById('edit-button').style.display = 'inline-block';
                    document.getElementById('save-button').style.display = 'none';
                    document.getElementById('cancel-button').style.display = 'none';
                    var notyf = new Notyf();
                    notyf.success('Profile updated successfully');
                } else {
                    var notyf = new Notyf();
                    notyf.error('Error updating profile');
                }
            } catch (error) {
                console.error('Error:', error);
                var notyf = new Notyf();
                notyf.error('Error updating profile');
                
            }
        }
        </script>

        <script>
            document.getElementById('password-form').addEventListener('submit', (event) => {
                event.preventDefault()

                const currentPass = document.getElementById('current-pass').value.trim()
                const newPass = document.getElementById('newPass').value.trim()
                const newPass2 = document.getElementById('newPass2').value.trim()


                const currentPassLabel = document.getElementById('currentPassLabel');
                const newPassLabel = document.getElementById('newPassLabel');
                const newPassLabel2 = document.getElementById('newPassLabel2');

                console.log(currentPass, newPass, newPass2)

                const passwordRegex = 	/^(?=.*[0-9]+.*)(?=.*[a-zA-Z]+.*)[0-9a-zA-Z]{6,}$/;

                let isValid = true;

                if (!currentPass) {
                    currentPassLabel.textContent = 'Current password is required';
                    currentPassLabel.classList.add('error-message');
                    isValid = false;
                } else {
                    currentPassLabel.textContent = 'Enter current password';
                    currentPassLabel.classList.remove('error-message');
                }

                if (!newPass){
                    newPassLabel.textContent = 'New password is required';
                    newPassLabel.classList.add('error-message');
                    isValid = false;
                } else if (!passwordRegex.test(newPass)){
                    newPassLabel.textContent = 'Password must be at least 6 characters long and contain at least one number and one letter';
                    newPassLabel.classList.add('error-message');
                    isValid = false;
                }else{
                    newPassLabel.textContent = 'Enter new password';
                    newPassLabel.classList.remove('error-message');
                }

                if (!newPass2){
                    newPassLabel2.textContent = 'Confirm new password is required';
                    newPassLabel2.classList.add('error-message');
                    isValid = false;
                } else if (newPass !== newPass2){
                    newPassLabel2.textContent = 'Passwords do not match';
                    newPassLabel2.classList.add('error-message');
                    isValid = false;
                }else {
                    newPassLabel2.textContent = 'Confirm new password';
                    newPassLabel2.classList.remove('error-message');
                }

                if(isValid){
                    const data = {
                        currentPassword: currentPass,
                        password: newPass
                    }
                    updatePassword(data)
                }

            })

            function updatePassword(data){

                fetch('/password', {
                    method: 'PUT',
                    headers: {
                        'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)
                        })
                        .then(res => res.json())
                        .then(data => {
                            if (data.success){
                                var notyf = new Notyf();
                                notyf.success(data.message,1000)
                                const inputs = document.querySelectorAll('#password-form input');
                                inputs.forEach(input => input.value = '');

                            } else {
                                var notyf = new Notyf();
                                notyf.error(data.message)
                                }
                            })
                            .catch(err => {
                                var notyf = new Notyf();
                                notyf.error('password changes failed')
                            })
                                        
            }

        </script>

        <script>

            document.getElementById('add-address').addEventListener('submit', (event) => {
                event.preventDefault();

                // inputs
                const name = document.getElementById('addName').value.trim()
                const phone = document.getElementById('addPhone').value.trim()
                const address = document.getElementById('addAddress').value.trim()
                const street = document.getElementById('addStreet').value.trim()
                const city = document.getElementById('addCity').value.trim()
                const landmark = document.getElementById('addLandmark').value.trim()
                const state = document.getElementById('addState').value.trim()
                const pincode = document.getElementById('addPincode').value.trim()

                // labels
                const nameLabel = document.getElementById('addNameLabel')
                const phoneLabel = document.getElementById('addPhoneLabel')
                const addressLabel = document.getElementById('addAddressLabel')
                const streetLabel = document.getElementById('addStreetLabel')
                const cityLabel = document.getElementById('addCityLabel')
                const landmarkLabel = document.getElementById('addLandmarkLabel')
                const stateLabel = document.getElementById('addStateLabel')
                const pincodeLabel = document.getElementById('addPincodeLabel')

                const phonePattern = /^\d{10}$/;
                const namePattern = /^[a-z][a-z '-.,]{0,31}$|^$/i
                const pincodePattern = /[1-9]{1}[0-9]{5}|[1-9]{1}[0-9]{3}\\s[0-9]{3}/;

                let isValid = true

                if(!name){
                    nameLabel.classList.add('error-message')
                    nameLabel.innerHTML = 'Name is required'
                    isValid = false
                } else if(!name.match(namePattern)){
                        nameLabel.classList.add('error-message')
                        nameLabel.innerHTML = 'Name is invalid'
                        isValid = false
                } else {
                    nameLabel.classList.remove('error-message')
                    nameLabel.innerHTML = 'Name' 
                }

                if(!phone){
                    phoneLabel.classList.add('error-message')
                    phoneLabel.innerHTML = 'Phone is required'
                    isValid = false
                } else if(!phone.match(phonePattern)){
                    phoneLabel.classList.add('error-message')
                    phoneLabel.innerHTML = 'Phone is invalid'
                    isValid = false
                } else {
                    phoneLabel.classList.remove('error-message')
                    phoneLabel.innerHTML = 'Phone'
                    
                }

                if(!address){
                    addressLabel.classList.add('error-message')
                    addressLabel.innerHTML = 'Address is required'
                    isValid = false
                } else {
                    addressLabel.classList.remove('error-message')
                    addressLabel.innerHTML = 'Address'
                }

                if(!street){
                    streetLabel.classList.add('error-message')
                    streetLabel.innerHTML = 'Street is required'
                    isValid = false
                } else {
                    streetLabel.classList.remove('error-message')
                    streetLabel.innerHTML = 'Street'
                    
                }

                if(!city){
                    cityLabel.classList.add('error-message')
                    cityLabel.innerHTML = 'City is required'
                    isValid = false
                } else {
                    cityLabel.classList.remove('error-message')
                    cityLabel.innerHTML = 'City'
                }

                if(!state){
                    stateLabel.classList.add('error-message')
                    stateLabel.innerHTML = 'State is required'
                    isValid = false
                } else {
                    stateLabel.classList.remove('error-message')
                    stateLabel.innerHTML = 'State'
                }
                
                if(!landmark){
                    landmarkLabel.classList.add('error-message')
                    landmarkLabel.innerHTML = 'Landmark is required'
                    isValid = false
                } else {
                    landmarkLabel.classList.remove('error-message')
                    landmarkLabel.innerHTML = 'Landmark'
                }

                if(!pincode){
                    pincodeLabel.classList.add('error-message')
                    pincodeLabel.innerHTML = 'Pincode is required'
                    isValid = false
                } else if (!pincode.match(pincodePattern)){
                    pincodeLabel.classList.add('error-message')
                    pincodeLabel.innerHTML = 'Pincode is invalid'
                    isValid = false
                } else {
                    pincodeLabel.classList.remove('error-message')
                    pincodeLabel.innerHTML = 'Pincode'
                }

                if(isValid){

                    const data = {
                        name: name,
                        phone: phone,
                        address: address,
                        street: street,
                        city: city,
                        state: state,
                        landmark: landmark,
                        pincode: pincode
                    }

                    addAddress(data)
                }
                
                

            })

            function addAddress(data) {
    fetch('/address', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify(data)
    })
    .then(res => res.json())
    .then(data => {
        var notyf = new Notyf();

        if (data.success) {
            notyf.success(data.message, 1000);

            // Add new address to the address container
            const addressContainer = document.getElementById('address-container');
            const address = data.address;

            // Create the address card HTML
            const newAddressHTML = `
                    <div class="address-card my-2" data-address-id="${address._id}">
                        <div class="address-details">
                            <p class="address-content">
                                <span class="address-name">${address.name}</span>
                                <span class="address-phone">${address.phone}</span><br>
                                <span class="address-line">${address.address}, ${address.street}, ${address.city}, ${address.landmark}, ${address.state} - <span class="address-zip">${address.pincode}</span></span>
                            </p>
                            <div class="options-dropdown">
                                <button class="options-icon">
                                    <span class="material-symbols-outlined">
                                        more_vert
                                    </span>
                                </button>
                                <div class="options-menu">
                                    <div class="option-item">
                                        <a data-toggle="modal" href="#editAddressModal${address._id}" class="option-label" data-bs-toggle="modal" data-bs-target="#editAddressModal${address._id}">Edit</a>
                                    </div>
                                    <div class="option-item">
                                        <a data-toggle="modal" href="#deleteAddressModal${address._id}" class="option-label" data-bs-toggle="modal" data-bs-target="#deleteAddressModal${address._id}">Delete</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            // Append the new address card HTML to the address container
            addressContainer.insertAdjacentHTML('beforeend', newAddressHTML);

            // Create the Edit Address Modal HTML
            const editModalHTML = `
                    <div class="modal-wide modal fade" id="editAddressModal${address._id}" tabindex="-1" role="dialog" aria-labelledby="editAddressModalLabel${address._id}" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="editAddressModalLabel${address._id}">Edit Address</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body m-5">
                                    <!-- Form Content -->
                                    <form id="edit-address-${address._id}">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <label id="editNameLabel-${address._id}">Name *</label>
                                                <input id="editName-${address._id}" type="text" class="form-control" value="${address.name}">
                                            </div>
                                            <div class="col-sm-6">
                                                <label id="editPhoneLabel-${address._id}">Phone*</label>
                                                <input id="editPhone-${address._id}" type="text" class="form-control" value="${address.phone}">
                                            </div>
                                        </div>
                                        <label id="editAddressLabel-${address._id}">Address</label>
                                        <input id="editAddress-${address._id}" type="text" class="form-control" value="${address.address}">
                                        <small class="form-text">Your house or office name and address</small>
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <label id="editStreetLabel-${address._id}">Street/Locality</label>
                                                <input id="editStreet-${address._id}" type="text" class="form-control" value="${address.street}">
                                            </div>
                                            <div class="col-sm-6">
                                                <label id="editCityLabel-${address._id}">City/Destrict/Town</label>
                                                <input id="editCity-${address._id}" type="text" class="form-control" value="${address.city}">
                                            </div>
                                        </div>
                                        <label id="editLandmarkLabel-${address._id}">Landmark</label>
                                        <input id="editLandmark-${address._id}" type="text" class="form-control" value="${address.landmark}">
                                        <div class="row">
                                            <div class="col-sm-6">
                                                <label id="editStateLabel-${address._id}">State</label>
                                                <input id="editState-${address._id}" type="text" class="form-control" value="${address.state}">
                                            </div>
                                            <div class="col-sm-6">
                                                <label id="editPincodeLabel-${address._id}">Pincode</label>
                                                <input id="editPincode-${address._id}" type="number" class="form-control" value="${address.pincode}">
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-outline-primary-2">
                                            <span>UPDATE</span>
                                            <i class="icon-long-arrow-right"></i>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            // Append the Edit Address Modal HTML to the body
            document.body.insertAdjacentHTML('beforeend', editModalHTML);

            // Create the Delete Address Modal HTML
            const deleteModalHTML = `
                    <div class="modal fade" id="deleteAddressModal${address._id}" tabindex="-1" role="dialog" aria-labelledby="deleteAddressModalLabel${address._id}" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title" id="deleteAddressModalLabel${address._id}">Delete Address</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body m-5">
                                    <p>Are you sure you want to delete this address?</p>
                                </div>
                                <div class="modal-footer">
                                    <form id="delete-address-form-${address._id}">
                                        <input type="hidden" name="addressId" value="${address._id}">
                                        <button type="submit" class="btn btn-danger">Delete</button>
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                `;

            // Append the Delete Address Modal HTML to the body
            document.body.insertAdjacentHTML('beforeend', deleteModalHTML);

            // Close the modal using Bootstrap's modal method
            $('#addAddressModal').modal('hide');

        } else {
            notyf.error(data.message);
        }
    })
    .catch(err => {
        notyf.error('Adding address failed');
    });
}


        </script>

<script>

    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('form[id^="edit-address-"]');

        forms.forEach(form => {
            form.addEventListener('submit', function (event) {
                event.preventDefault();

                const addressId = this.id.split('edit-address-')[1];
                const name = document.getElementById(`editName-${addressId}`).value.trim();
                const phone = document.getElementById(`editPhone-${addressId}`).value.trim();
                const address = document.getElementById(`editAddress-${addressId}`).value.trim();
                const street = document.getElementById(`editStreet-${addressId}`).value.trim();
                const city = document.getElementById(`editCity-${addressId}`).value.trim();
                const landmark = document.getElementById(`editLandmark-${addressId}`).value.trim()
                const state = document.getElementById(`editState-${addressId}`).value.trim();
                const pincode = document.getElementById(`editPincode-${addressId}`).value.trim();

                const nameLabel = document.getElementById(`editNameLabel-${addressId}`);
                const phoneLabel = document.getElementById(`editPhoneLabel-${addressId}`);
                const addressLabel = document.getElementById(`editAddressLabel-${addressId}`);
                const streetLabel = document.getElementById(`editStreetLabel-${addressId}`);
                const cityLabel = document.getElementById(`editCityLabel-${addressId}`);
                const landmarkLabel = document.getElementById(`editLandmarkLabel-${addressId}`);
                const stateLabel = document.getElementById(`editStateLabel-${addressId}`);
                const pincodeLabel = document.getElementById(`editPincodeLabel-${addressId}`);
             


                const phonePattern = /^\d{10}$/;
                const namePattern = /^[a-z][a-z '-.,]{0,31}$|^$/i
                const pincodePattern = /[1-9]{1}[0-9]{5}|[1-9]{1}[0-9]{3}\\s[0-9]{3}/;

                let isValid = true

                if(!name){
                    nameLabel.classList.add('error-message')
                    nameLabel.innerHTML = 'Name is required'
                    isValid = false
                } else if(!name.match(namePattern)){
                        nameLabel.classList.add('error-message')
                        nameLabel.innerHTML = 'Name is invalid'
                        isValid = false
                } else {
                    nameLabel.classList.remove('error-message')
                    nameLabel.innerHTML = 'Name' 
                }

                if(!phone){
                    phoneLabel.classList.add('error-message')
                    phoneLabel.innerHTML = 'Phone is required'
                    isValid = false
                } else if(!phone.match(phonePattern)){
                    phoneLabel.classList.add('error-message')
                    phoneLabel.innerHTML = 'Phone is invalid'
                    isValid = false
                } else {
                    phoneLabel.classList.remove('error-message')
                    phoneLabel.innerHTML = 'Phone'
                    
                }

                if(!address){
                    addressLabel.classList.add('error-message')
                    addressLabel.innerHTML = 'Address is required'
                    isValid = false
                } else {
                    addressLabel.classList.remove('error-message')
                    addressLabel.innerHTML = 'Address'
                }

                if(!street){
                    streetLabel.classList.add('error-message')
                    streetLabel.innerHTML = 'Street is required'
                    isValid = false
                } else {
                    streetLabel.classList.remove('error-message')
                    streetLabel.innerHTML = 'Street'
                    
                }

                if(!city){
                    cityLabel.classList.add('error-message')
                    cityLabel.innerHTML = 'City is required'
                    isValid = false
                } else {
                    cityLabel.classList.remove('error-message')
                    cityLabel.innerHTML = 'City'
                }

                if(!state){
                    stateLabel.classList.add('error-message')
                    stateLabel.innerHTML = 'State is required'
                    isValid = false
                } else {
                    stateLabel.classList.remove('error-message')
                    stateLabel.innerHTML = 'State'
                }
                
                if(!landmark){
                    landmarkLabel.classList.add('error-message')
                    landmarkLabel.innerHTML = 'Landmark is required'
                    isValid = false
                } else {
                    landmarkLabel.classList.remove('error-message')
                    landmarkLabel.innerHTML = 'Landmark'
                }

                if(!pincode){
                    pincodeLabel.classList.add('error-message')
                    pincodeLabel.innerHTML = 'Pincode is required'
                    isValid = false
                } else if (!pincode.match(pincodePattern)){
                    pincodeLabel.classList.add('error-message')
                    pincodeLabel.innerHTML = 'Pincode is invalid'
                    isValid = false
                } else {
                    pincodeLabel.classList.remove('error-message')
                    pincodeLabel.innerHTML = 'Pincode'
                }

                if(isValid){

                    const data = {
                        addressId: addressId,
                        name: name,
                        phone: phone,
                        address: address,
                        street: street,
                        city: city,
                        state: state,
                        landmark: landmark,
                        pincode: pincode
                    }

                    editAddress(data)
                }
            });
        });
    });

    function editAddress(data) {
            fetch('/address', {
                method: 'PUT',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
    .then(data => {
        var notyf = new Notyf();

        if (data.success) {
            notyf.success(data.message, 1000);
            const newAddress = data.address;

            // Dynamically update the address field
            const addressCard = document.querySelector(`[data-address-id="${newAddress._id}"]`);
            if (addressCard) {
                addressCard.querySelector('.address-name').textContent = newAddress.name;
                addressCard.querySelector('.address-phone').textContent = newAddress.phone;
                addressCard.querySelector('.address-line').innerHTML = `
                    ${newAddress.address}, ${newAddress.street}, ${newAddress.city}, 
                    ${newAddress.landmark}, ${newAddress.state} - 
                    <span class="address-zip">${newAddress.pincode}</span>
                `;
            }

           
            $('#editAddressModal' + newAddress._id).modal('hide');

        } else {
            notyf.error(data.message);
        }
    })
    .catch(err => {
        var notyf = new Notyf();
        notyf.error('Editing address failed');
    });
}
    

    
</script>

<script>

document.addEventListener('DOMContentLoaded', function() {
    // Event listener for delete forms
    document.querySelectorAll('form[id^="delete-address-form-"]').forEach(form => {
        form.addEventListener('submit', function(event) {
            event.preventDefault();
            console.log('here')
            const addressId = this.querySelector('input[name="addressId"]').value;
            console.log(addressId)

            fetch(`/deleteAddress`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ addressId })
            })
            .then(res => res.json())
            .then(data => {
                var notyf = new Notyf();

                if (data.success) {
                    notyf.success(data.message, 1000);

                    // Remove the address card from the DOM
                    const addressCard = document.querySelector(`[data-address-id="${addressId}"]`);
                    if (addressCard) {
                        addressCard.remove();
                    }

                    // Close the modal using Bootstrap's modal method
                    $(`#deleteAddressModal${addressId}`).modal('hide');

                } else {
                    notyf.error(data.message);
                }
            })
            .catch(err => {
                var notyf = new Notyf();
                notyf.error('Deleting address failed');
            });
        });
    });
});

</script>


<script>

    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('form[id^="cancel-order-"]');

        forms.forEach(form => {
            form.addEventListener('submit', function (event) {
                event.preventDefault();

                const formId = this.id.split('cancel-order-')[1];
                const [orderId, productId, variantId] = formId.split('-');
            
                const reason = document.getElementById(`cancelOrder-${orderId}-${variantId}`).value.trim()

                const reasonLabel = document.getElementById(`cancelOrderLabel-${orderId}-${variantId}`)
              

                let isValid = true

                if(!reason){
                    reasonLabel.classList.add('error-message')
                    reasonLabel.innerHTML = 'Reason is required'
                    isValid = false
                } else {
                    reasonLabel.classList.remove('error-message')
                    reasonLabel.innerHTML = 'Reason for Cancel'
                }

                

                if(isValid){

                    const data = {
                        orderId,
                        productId,
                        variantId,
                        reason,
                        status: 'Cancelled'
                    }

                    cancelOrder(data)
                }
            });
        });
    });

    function cancelOrder(data) {
            fetch('/order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    
                    
                    $(`#cancelOrderModal${data.orderId}-${data.variantId}`).modal('hide');
                    $(`#orderStatus${data.orderId}-${data.variantId}`).text('Cancelled');
                    $(`#cancelBtn${data.orderId}-${data.variantId}`).hide();
                    // Show success alert
                Swal.fire({
                    title: 'Success',
                    text: data.message,
                    icon: 'success',
                    
                })

                
                    

                } else {
                    $(`#cancelOrderModal${data.orderId}-${data.variantId}`).modal('hide');
                    
                    // Show error alert
                Swal.fire({
                    title: 'Error',
                    text: data.message,
                    icon: 'error',
                    confirmButtonColor: '#d33',
                    confirmButtonText: 'OK'
                });
                }
            })
            .catch(err => {
                $(`#cancelOrderModal${err.orderId}-${err.variantId}`).modal('hide');

                // Show error alert
                Swal.fire({
                    title: 'Error',
                    text: err.message,
                    icon: 'error',
                    confirmButtonColor: '#d33',
                    confirmButtonText: 'OK'
                });
            });
        }
    

    
</script>

<script>

    document.addEventListener('DOMContentLoaded', function () {
        const forms = document.querySelectorAll('form[id^="return-order-"]');

        forms.forEach(form => {
            form.addEventListener('submit', function (event) {
                event.preventDefault();

                const formId = this.id.split('return-order-')[1];
                const [orderId, productId, variantId] = formId.split('-');
            
                const reason = document.getElementById(`returnOrder-${orderId}-${variantId}`).value.trim()

                const reasonLabel = document.getElementById(`returnOrderLabel-${orderId}-${variantId}`)
              

                let isValid = true

                if(!reason){
                    reasonLabel.classList.add('error-message')
                    reasonLabel.innerHTML = 'Reason is required'
                    isValid = false
                } else {
                    reasonLabel.classList.remove('error-message')
                    reasonLabel.innerHTML = 'Reason for Returning'
                }

                

                if(isValid){

                    const data = {
                        orderId,
                        productId,
                        variantId,
                        reason,
                        status: 'Return Requested'
                    }

                    returnOrder(data)
                }
            });
        });
    });

    function returnOrder(data) {
            fetch('/order', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            })
            .then(res => res.json())
            .then(data => {
                if (data.success) {
                    
                    
                    $(`#returnOrderModal${data.orderId}-${data.variantId}`).modal('hide');
                    $(`#orderStatus${data.orderId}-${data.variantId}`).text('Return Requested');
                    $(`#returnBtn${data.orderId}-${data.variantId}`).hide();

                    // Show success alert
                Swal.fire({
                    title: 'Success',
                    text: data.message,
                    icon: 'success',
                    
                })

                
                    

                } else {

                    $(`#returnOrderModal${data.orderId}-${data.variantId}`).modal('hide');
                    // Show error alert
                Swal.fire({
                    title: 'Error',
                    text: data.message,
                    icon: 'error',
                    confirmButtonColor: '#d33',
                    confirmButtonText: 'OK'
                });
                }
            })
            .catch(err => {
                $(`#returnOrderModal${err.orderId}-${err.variantId}`).modal('hide');
                // Show error alert
                Swal.fire({
                    title: 'Error',
                    text: err.message,
                    icon: 'error',
                    confirmButtonColor: '#d33',
                    confirmButtonText: 'OK'
                });
            });
        }
    

    
</script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Function to get query parameter by name
        function getQueryParam(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
    
        // Check if the specific condition is met (e.g., a query parameter 'openTab' equals 'orders')
        const openTab = getQueryParam('openTab');
    
        if (openTab === 'orders') {
            const tabLink = document.querySelector('#tab-orders-link');
            const tabContent = new bootstrap.Tab(tabLink);
            tabContent.show();
        }
    });
    </script>

<script>
    document.addEventListener('DOMContentLoaded', function() {
  const retry = document.getElementById('retry-payment');
  
  retry.addEventListener('click', function(event) {
    event.preventDefault(); // Prevent the default link behavior
    
    var orderId = this.getAttribute('data-order-id');
    console.log('Order ID:', orderId);
    
    retryPayment(orderId);
  });
});

function retryPayment(orderId) {
  fetch('/order', {
    method: 'PATCH',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ orderId: orderId })
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
        // Razorpay payment flow
        const options = {
          key: data.order.razorpayKeyId,
          amount: data.order.amount * 100,  
          currency: "INR",
          name: 'TAARA',
          description: 'Purchase Description',
          order_id: data.order.razorpayOrderId,
          handler: function (response) {
            const orderId = data.orderId
            const status = 'Paid'
            updatePaymentStatus(orderId, status)

          },
          prefill: {
            email: data.user.email,
          },
          theme: {
            color: '#cd9967'
          },
          modal: {
            ondismiss: function() {
                const orderId = data.orderId
                const status = 'Failed'
                updatePaymentStatus(orderId, status)
            }
          }
        };
        const rzp1 = new Razorpay(options);
        rzp1.open();
    } else {
      Swal.fire({
        title: 'Error',
        text: data.message,
        icon: 'error',
        confirmButtonText: 'Ok'
      });
      console.log('failed', data.message);
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({
      title: 'Error',
      text: 'An error occurred during checkout.',
      icon: 'error',
      confirmButtonText: 'Ok'
    });
  });
}


function updatePaymentStatus(orderId, status) {
  fetch('/order', {
    method: 'PUT',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      orderId: orderId,
      status: status
    })
  })
  .then(res => res.json())
  .then(data => {
    if (data.success) {
      if (data.status === 'Paid') {
        Swal.fire({
          title: 'Payment Successful',
          text: 'Your order has been paid successfully.',
          icon: 'success',
          confirmButtonText: 'Ok'
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = '/account?openTab=orders';
          }
        });
      } else {
        // payment failed
        Swal.fire({
          title: 'Payment Failed',
          text: 'Your payment was not successful.',
          icon: 'error',
          confirmButtonText: 'Ok'
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = '/account?openTab=orders';
          }
        });
      }
    }
  })
  .catch(error => {
    console.error('Error:', error);
    Swal.fire({
      title: 'Error',
      text: 'An error occurred during updating payment status.',
      icon: 'error',
      confirmButtonText: 'Ok'
    });
  });
}
</script>



    <script>

document.addEventListener('DOMContentLoaded', function() {
    function togglePasswordVisibility(passwordField, toggleIcon) {
        const type = passwordField.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordField.setAttribute('type', type);
        toggleIcon.classList.toggle('fa-eye-slash');
    }

    // Current password toggle
    const toggleCurrentPass = document.querySelector('#toggleCurrentPass');
    const currentPass = document.querySelector('#current-pass');

    if (toggleCurrentPass && currentPass) {
        toggleCurrentPass.addEventListener('click', function() {
            togglePasswordVisibility(currentPass, this);
        });
    }

    // New password toggle
    const toggleNewPass = document.querySelector('#toggleNewPass');
    const newPass = document.querySelector('#newPass');

    if (toggleNewPass && newPass) {
        toggleNewPass.addEventListener('click', function() {
            togglePasswordVisibility(newPass, this);
        });
    }

    // Confirm new password toggle
    const toggleNewPass2 = document.querySelector('#toggleNewPass2');
    const newPass2 = document.querySelector('#newPass2');

    if (toggleNewPass2 && newPass2) {
        toggleNewPass2.addEventListener('click', function() {
            togglePasswordVisibility(newPass2, this);
        });
    }
});
    </script>

<script src="https://checkout.razorpay.com/v1/checkout.js"></script>


    <!-- Plugins JS File -->
    <script src="/User/assets/js/jquery.min.js"></script>
    <script src="/User/assets/js/bootstrap.bundle.min.js"></script>
    <script src="/User/assets/js/jquery.hoverIntent.min.js"></script>
    <script src="/User/assets/js/jquery.waypoints.min.js"></script>
    <script src="/User/assets/js/superfish.min.js"></script>
    <script src="/User/assets/js/owl.carousel.min.js"></script>
    <!-- Main JS File -->
    <script src="/User/assets/js/main.js"></script>
</body>



</html>

